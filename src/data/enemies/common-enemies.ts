import { AffinityType } from "../../types/affinity";
import { EnemyCharacter } from "../../types/enemy";
import { Rarity } from "../../types/rarity";
import {
  AdjustmentDirection,
  AdjustStatSkillEffect,
  ApplyBurnStatusEffectSkillEffect,
  ApplyPoisonStatusEffectSkillEffect,
  ApplyStunStatusEffectSkillEffect,
  DamageSkillEffect,
  HealSkillEffect,
  ModifierType,
  Skill,
  SkillEffectType,
  TargetType,
} from "../../types/skillTypes";
import { StatType } from "../../types/stats";
import { StatusEffectType } from "../../types/statusEffects";
import { BASELINE } from "../statBaselines";

const slimeSplashSkill: Skill = {
  id: "slime_splash",
  name: "Slime Splash",
  cost: 20,
  costStat: StatType.energy,
  effects: [
    {
      id: "slime_splash_effect",
      name: "Slime Splash Effect",
      type: SkillEffectType.damage,
      affinities: [AffinityType.chaos],
      damageMultiplier: 1.3,
      damageStat: StatType.strength,
      defenseStat: StatType.defense,
      targetType: "randomEnemy",
    } as DamageSkillEffect,
    {
      id: "slime_splash_speed_reduction",
      name: "Slime Splash Speed Reduction",
      type: SkillEffectType.adjustStat,
      affinities: [AffinityType.chaos],
      stat: StatType.speed,
      userStat: StatType.strength,
      modifierValue: 40,
      direction: AdjustmentDirection.decrease,
      duration: 3,
      targetType: "randomEnemy",
    } as AdjustStatSkillEffect,
  ],
};

export const ENEMY_SLIME_GREEN: EnemyCharacter = {
  id: "slime_green",
  name: "Green Slime",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.chaos],
  weakAffinities: [AffinityType.knowledge, AffinityType.spirit],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] + 50,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] - 20,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] + 30,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] + 10,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense] - 10,
    [StatType.speed]: BASELINE.COMMON[StatType.speed],
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [slimeSplashSkill],
};

export const ENEMY_RAT_GIANT: EnemyCharacter = {
  id: "rat_giant",
  name: "Giant Rat",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.beast],
  weakAffinities: [AffinityType.beast, AffinityType.textile],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] + 50,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 10,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] - 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] - 20,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense] - 20,
    [StatType.speed]: BASELINE.COMMON[StatType.speed] - 10,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "gnaw",
      name: "Gnaw",
      cost: 25,
      costStat: StatType.energy,
      effects: [
        {
          id: "gnaw_damage_effect",
          name: "Gnaw Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.beast],
          damageMultiplier: 1.1,
          damageStat: StatType.strength,
          defenseStat: StatType.defense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "gnaw_heal_effect",
          name: "Gnaw Heal Effect",
          type: SkillEffectType.heal,
          affinities: [AffinityType.beast],
          healMultiplier: 0.1,
          healStat: StatType.strength,
          targetType: TargetType.self,
        } as HealSkillEffect,
      ],
    },
  ],
};

export const ENEMY_BAT_CAVE: EnemyCharacter = {
  id: "bat_cave",
  name: "Cave Bat",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.gem],
  weakAffinities: [AffinityType.chaos, AffinityType.radiance],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] - 10,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain] + 6,
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 30,
    [StatType.defense]: BASELINE.COMMON[StatType.defense],
    [StatType.magic]: BASELINE.COMMON[StatType.magic],
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense],
    [StatType.speed]: BASELINE.COMMON[StatType.speed] + 30,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "sonic_screech",
      name: "Sonic Screech",
      cost: 35,
      costStat: StatType.energy,
      effects: [
        {
          id: "sonic_screech_damage_effect",
          name: "Sonic Screech Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.gem],
          damageMultiplier: 1.3,
          damageStat: StatType.speed,
          defenseStat: StatType.magicDefense,
          targetType: TargetType.allEnemies,
        } as DamageSkillEffect,
        {
          id: "sonic_screech_stat_adjustment_effect",
          name: "Sonic Screech Stat Adjustment Effect",
          type: SkillEffectType.adjustStat,
          affinities: [AffinityType.gem],
          stat: StatType.magicDefense,
          modifierValue: 25,
          duration: 2,
          direction: AdjustmentDirection.decrease,
          targetType: TargetType.allEnemies,
        } as AdjustStatSkillEffect,
      ],
    },
  ],
};

export const ENEMY_GOBLIN_SNEAK: EnemyCharacter = {
  id: "goblin_sneak",
  name: "Sneaky Goblin",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.textile],
  weakAffinities: [AffinityType.gem, AffinityType.void],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] - 20,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 15,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] - 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] + 15, // Goblins are not very magical
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense], // Goblins are not very magical either
    [StatType.speed]: BASELINE.COMMON[StatType.speed] + 15,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "stab_n_run",
      name: "Stab & Run",
      cost: 25,
      costStat: StatType.energy,
      effects: [
        {
          id: "stab_n_run_damage_effect",
          name: "Stab & Run Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.textile],
          damageMultiplier: 1.3,
          damageStat: StatType.strength,
          defenseStat: StatType.defense,
          targetType: TargetType.lowestHealthEnemy,
        } as DamageSkillEffect,
        {
          id: "stab_n_run_stat_adjustment_effect",
          name: "Stab & Run Stat Adjustment Effect",
          type: SkillEffectType.adjustStat,
          affinities: [AffinityType.textile],
          stat: StatType.speed,
          modifierValue: 50,
          duration: 2,
          targetType: TargetType.self,
          direction: AdjustmentDirection.increase,
        } as AdjustStatSkillEffect,
      ],
    },
  ],
};

export const ENEMY_FUNGUS_SPORELING: EnemyCharacter = {
  id: "fungus_sporeling",
  name: "Sporeling",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.knowledge],
  weakAffinities: [AffinityType.radiance, AffinityType.knowledge],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] + 30,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] - 10,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] + 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] + 20,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense] + 20,
    [StatType.speed]: BASELINE.COMMON[StatType.speed] - 10,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "spore_cloud",
      name: "Spore Cloud",
      cost: 25,
      costStat: StatType.energy,
      effects: [
        {
          id: "spore_cloud_damage_effect",
          name: "Spore Cloud Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.knowledge],
          damageMultiplier: 1.1,
          damageStat: StatType.magic,
          defenseStat: StatType.magicDefense,
          targetType: TargetType.allEnemies,
        } as DamageSkillEffect,
        {
          id: "spore_cloud_poison_effect",
          name: "Spore Cloud Poison Effect",
          type: SkillEffectType.applyStatusEffect,
          affinities: [AffinityType.knowledge],
          statusEffectType: StatusEffectType.poison,
          modifierType: ModifierType.Percentage,
          stat: StatType.magic,
          value: 0.2,
          duration: 2,
          targetType: TargetType.allEnemies,
        } as ApplyPoisonStatusEffectSkillEffect,
      ],
    },
  ],
};

export const ENEMY_SKELETON_MINI: EnemyCharacter = {
  id: "skeleton_mini",
  name: "Mini Skeleton",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.void],
  weakAffinities: [AffinityType.chaos, AffinityType.beast],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] - 30,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 5,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] + 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] - 20,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense],
    [StatType.speed]: BASELINE.COMMON[StatType.speed] - 10,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "bone_throw",
      name: "Bone Throw",
      cost: 25,
      costStat: StatType.energy,
      effects: [
        {
          id: "bone_throw_damage_effect",
          name: "Bone Throw Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.void],
          damageMultiplier: 1.3,
          damageStat: StatType.strength,
          defenseStat: StatType.defense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "bone_throw_stat_adjustment_effect",
          name: "Bone Throw Stat Adjustment Effect",
          type: SkillEffectType.adjustStat,
          affinities: [AffinityType.void],
          stat: StatType.defense,
          modifierValue: 20,
          duration: 4,
          targetType: TargetType.randomEnemy,
          direction: AdjustmentDirection.decrease,
        } as AdjustStatSkillEffect,
      ],
    },
  ],
};

export const ENEMY_WOLF_CUB: EnemyCharacter = {
  id: "wolf_cub",
  name: "Wolf Cub",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.beast],
  weakAffinities: [AffinityType.textile, AffinityType.spirit],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] - 10,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain] + 3,
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 10,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] - 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic],
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense],
    [StatType.speed]: BASELINE.COMMON[StatType.speed] + 20,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "pack_howl",
      name: "Pack Howl",
      cost: 30,
      costStat: StatType.energy,
      effects: [
        {
          id: "pack_howl_damage_effect",
          name: "Pack Howl Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.beast],
          damageMultiplier: 1.4,
          damageStat: StatType.strength,
          defenseStat: StatType.defense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "pack_howl_stat_adjustment_effect",
          name: "Pack Howl Stat Adjustment Effect",
          type: SkillEffectType.adjustStat,
          affinities: [AffinityType.beast],
          stat: StatType.strength,
          userStat: StatType.strength,
          modifierValue: 40,
          duration: 3,
          targetType: TargetType.randomEnemy,
          direction: AdjustmentDirection.decrease,
        } as AdjustStatSkillEffect,
      ],
    },
  ],
};

export const ENEMY_IMP_FIRE: EnemyCharacter = {
  id: "imp_fire",
  name: "Fire Imp",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.chaos],
  weakAffinities: [AffinityType.beast, AffinityType.knowledge],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] - 40,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 20,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] - 20,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] + 20,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense] + 10,
    [StatType.speed]: BASELINE.COMMON[StatType.speed] + 10,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "ember_burst",
      name: "Spore Cloud",
      cost: 15,
      costStat: StatType.energy,
      effects: [
        {
          id: "ember_burst_damage_effect",
          name: "Ember Burst Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.chaos],
          damageMultiplier: 1.15,
          damageStat: StatType.magic,
          defenseStat: StatType.magicDefense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "ember_burst_fire_effect",
          name: "Ember Burst Fire Effect",
          type: SkillEffectType.applyStatusEffect,
          affinities: [AffinityType.knowledge],
          statusEffectType: StatusEffectType.burn,
          value: 5,
          targetType: TargetType.allEnemies,
        } as ApplyBurnStatusEffectSkillEffect,
      ],
    },
  ],
};

export const ENEMY_BEETLE_IRON: EnemyCharacter = {
  id: "beetle_iron",
  name: "Iron Beetle",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.gem],
  weakAffinities: [AffinityType.chaos, AffinityType.spirit],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] + 60,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] - 10,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] + 30,
    [StatType.magic]: BASELINE.COMMON[StatType.magic],
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense],
    [StatType.speed]: BASELINE.COMMON[StatType.speed] - 20,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance],
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage],
  },
  skills: [
    {
      id: "iron_clash",
      name: "Iron Clash",
      cost: 20,
      costStat: StatType.energy,
      effects: [
        {
          id: "iron_clash_damage_effect",
          name: "Iron Clash Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.gem],
          damageMultiplier: 1.2,
          damageStat: StatType.defense,
          defenseStat: StatType.defense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "iron_clash_stat_adjustment_effect",
          name: "Iron Clash Stat Adjustment Effect",
          type: SkillEffectType.adjustStat,
          affinities: [AffinityType.gem],
          stat: StatType.defense,
          modifierValue: 60,
          duration: 3,
          targetType: TargetType.self,
          direction: AdjustmentDirection.increase,
        } as AdjustStatSkillEffect,
      ],
    },
  ],
};

export const ENEMY_MIMIC_CHEST: EnemyCharacter = {
  id: "mimic_chest",
  name: "Mimic Chest",
  rarity: Rarity.COMMON,
  strongAffinities: [AffinityType.gem],
  weakAffinities: [AffinityType.void],
  stats: {
    [StatType.health]: BASELINE.COMMON[StatType.health] + 50,
    [StatType.energy]: 0,
    [StatType.energyGain]: BASELINE.COMMON[StatType.energyGain],
    [StatType.strength]: BASELINE.COMMON[StatType.strength] + 15,
    [StatType.defense]: BASELINE.COMMON[StatType.defense] + 10,
    [StatType.magic]: BASELINE.COMMON[StatType.magic] + 5,
    [StatType.magicDefense]: BASELINE.COMMON[StatType.magicDefense] + 10,
    [StatType.speed]: BASELINE.COMMON[StatType.speed] - 10,
    [StatType.critChance]: BASELINE.COMMON[StatType.critChance] + 5,
    [StatType.critDamage]: BASELINE.COMMON[StatType.critDamage] + 0.5,
  },
  skills: [
    {
      id: "chomp_trap",
      name: "Chomp Trap",
      cost: 30,
      costStat: StatType.energy,
      effects: [
        {
          id: "chomp_trap_damage_effect",
          name: "Chomp Trap Damage Effect",
          type: SkillEffectType.damage,
          affinities: [AffinityType.gem],
          damageMultiplier: 1.2,
          damageStat: StatType.strength,
          defenseStat: StatType.defense,
          targetType: TargetType.randomEnemy,
        } as DamageSkillEffect,
        {
          id: "chomp_trap_stun_effect",
          name: "Chomp Trap Stun Effect",
          type: SkillEffectType.applyStatusEffect,
          affinities: [AffinityType.gem],
          value: 1,
          targetType: TargetType.randomEnemy,
        } as ApplyStunStatusEffectSkillEffect,
      ],
    },
  ],
};

// Optional: export all as an array for convenience
export const COMMON_ENEMIES = [
  ENEMY_SLIME_GREEN,
  ENEMY_RAT_GIANT,
  ENEMY_BAT_CAVE,
  ENEMY_GOBLIN_SNEAK,
  ENEMY_FUNGUS_SPORELING,
  ENEMY_SKELETON_MINI,
  ENEMY_WOLF_CUB,
  ENEMY_IMP_FIRE,
  ENEMY_BEETLE_IRON,
  ENEMY_MIMIC_CHEST,
];
